"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[48877],{4553:function(e,t,a){a.d(t,{x:function(){return n}});const n=e=>{const t=[];for(const a of e)t.push(...a);return t}},48579:function(e,t,a){function n(e){return()=>Boolean(e.values.length)}a.d(t,{Z:function(){return n}})},184421:function(e,t,a){function n(e){return t=>e.values.filter((e=>(null==e?void 0:e.name)===t))}a.d(t,{Z:function(){return n}})},541784:function(e,t,a){a.d(t,{O:function(){return l}});var n=a(297239);const l=(e,t,a,l)=>{const i={title:n.jn[t]||t,selectedDeptObject:{},facets:[]};return a&&(i.selectedDeptObject=a),null==e||e.forEach((e=>{var a;if("sort_and_filter"===t&&"default"===e.layout)null==(a=i.facets)||a.push(e);else if(t===e.type){var n;null==(n=i.facets)||n.push(e)}else if("all_filters"===t&&"sort"!==e.type){var s;if(l&&"default"===e.layout)null==(s=i.facets)||s.push(e);else if(!l){var r;null==(r=i.facets)||r.push(e)}}})),i}},680532:function(e,t,a){a.d(t,{EC:function(){return s},Lw:function(){return i},_C:function(){return l}});var n=a(297239);const l=(e,t)=>{var a;let l=[...null!=(a=null==e?void 0:e.values)?a:[]];if(t.selectionType===n.RT.SINGLE_SELECT)l=l.filter((e=>(null==e?void 0:e.name)!==t.name)),l.push({name:t.name,type:t.type,value:t.value,label:t.label});else{const e=l.some((e=>(null==e?void 0:e.name)===t.name&&e.value===t.value));t.isSelected&&!e?l.push({name:t.name,type:t.type,value:t.value,label:t.label}):l=l.filter((e=>!((null==e?void 0:e.name)===t.name&&e.value===t.value)))}return{...e,values:l}},i=(e,t,a)=>{let n=[...e.values];return t?{...e,values:[]}:(n=n.filter((e=>(null==e?void 0:e.name)!==a)),{...e,values:n})},s=(e,t,a)=>{if(t)return[];let n=e;for(;null!=a&&a.length&&n.length;){const e=a.pop();n=n.filter((t=>!((null==t?void 0:t.name)===(null==e?void 0:e.name)&&(null==t?void 0:t.value)===(null==e?void 0:e.value))))}return n}},455417:function(e,t,a){a.d(t,{U:function(){return V}});var n=a(870751),l=a(147584),i=a(548428),s=a(257869),r=a(564542),o=a(146570),c=a(48579),d=a(184421),u=a(297239),m=a(541784),p=a(680532),g=a(313350),f=a(869193),F=a(855124),S=a(35968),b=a(272374),v=a(4553),y=a(60068),h=a(417565),$=a(377792),L=a(347688),_=a(266537);var C=a(318254);const P="topic-sort-and-filter-query",I={type:"query",name:"TopicSortAndFilterQuery",query:'query TopicSortAndFilterQuery( $id:String! $page:Int = 1 $facet:String = "" $sort:String = "best_match" $catId:String = "" $max_price:String = "" $min_price:String = "" $ps:Int $prg:String = "" $fitmentSearchParams:JSON ={}$searchArgs:SearchArgumentsForCLS $enableFacetCount:Boolean = true $enableFlattenedFitment:Boolean = false ){seoTopicData( id:$id page:$page facet:$facet sort:$sort catId:$catId max_price:$max_price min_price:$min_price ps:$ps prg:$prg ){sisResponse{...TopicFilterResultFragment}}contentLayout( channel:"WWW" pageType:"TopicPage" tenant:"WM_GLASS" searchArgs:$searchArgs ){modules{__typename name version type moduleId matchedTrigger{zone}configs{__typename...TopicSortFilterModuleFragment...on TempoWM_GLASSWWWSearchFitmentModuleConfigs{fitments( fitmentSearchParams:$fitmentSearchParams fitmentFieldParams:null ){...FitmentFragment sisFitmentResponse{...TopicFilterResultFragment}}}}}}}fragment TopicFilterResultFragment on SearchInterface{aggregatedCount requestContext{shelfDisplayName}debug{sisUrl}paginationV2{pageProperties}itemStacks{meta{query stackId stackType startIndex layoutEnum totalItemCount viewAllParams{query cat_id sort facet}}}modules{facets{...FacetFragment}}}fragment TopicSortFilterModuleFragment on _TempoWM_GLASSWWWTopicSortFilterModuleConfigs{facets{title name type layout min max selectedMin selectedMax unboundedMax stepSize values{id name type itemCount @include(if:$enableFacetCount) isSelected baseSeoURL}}}fragment FacetFragment on Facet{title name expandOnLoad type layout min max selectedMin selectedMax unboundedMax stepSize isSelected values{id title name expandOnLoad description type itemCount @include(if:$enableFacetCount) isSelected baseSeoURL values{id title name expandOnLoad description type itemCount @include(if:$enableFacetCount) isSelected baseSeoURL values{id title name expandOnLoad description type itemCount @include(if:$enableFacetCount) isSelected baseSeoURL values{id title name expandOnLoad description type itemCount @include(if:$enableFacetCount) isSelected baseSeoURL values{id title name expandOnLoad description type itemCount @include(if:$enableFacetCount) isSelected baseSeoURL values{id title name expandOnLoad description type itemCount @include(if:$enableFacetCount) isSelected baseSeoURL values{id title name expandOnLoad description type itemCount @include(if:$enableFacetCount) isSelected baseSeoURL values{id title name expandOnLoad description type itemCount @include(if:$enableFacetCount) isSelected baseSeoURL}}}}}}}}}fragment FitmentFragment on Fitments{partTypeIDs result{status formId position quantityTitle extendedAttributes{...FitmentFieldFragment}labels{...LabelFragment}resultSubTitle notes suggestions{...FitmentSuggestionFragment}}labels{...LabelFragment}savedVehicle{vehicleType{...VehicleFieldFragment}vehicleYear{...VehicleFieldFragment}vehicleMake{...VehicleFieldFragment}vehicleModel{...VehicleFieldFragment}additionalAttributes{...VehicleFieldFragment}}fitmentFields{...VehicleFieldFragment}fitmentForms{id fields{...FitmentFieldFragment}title labels{...LabelFragment}}}fragment LabelFragment on FitmentLabels{ctas{...FitmentLabelEntityFragment}messages{...FitmentLabelEntityFragment}links{...FitmentLabelEntityFragment}images{...FitmentLabelEntityFragment}}fragment FitmentLabelEntityFragment on FitmentLabelEntity{id label labelV1 @include(if:$enableFlattenedFitment)}fragment VehicleFieldFragment on FitmentVehicleField{id label value}fragment FitmentFieldFragment on FitmentField{id displayName value extended data{value label}dependsOn isRequired errorMessage}fragment FitmentSuggestionFragment on FitmentSuggestion{id position loadIndex speedRating searchQueryParam labels{...LabelFragment}cat_id fitmentSuggestionParams{id value}}',hash:"9b920f3893e79e72d3d5958fcbb327441293a02e341b1535f63d29facdf3fe18"};var x=a(870797),T=a(85112);const q="sort-and-filter-query",R={type:"query",name:"SortAndFilter",query:'query SortAndFilter( $query:String = "" $page:Int = 1 $prg:Prg! $facet:String = "" $sort:Sort = best_match $catId:String = "" $max_price:String = "" $min_price:String = "" $pageType:String! $ps:Int $ptss:String $trsp:String $recall_set:String $fitmentSearchParams:JSON ={}$dealsId:String $isDealsPage:Boolean = false $searchParams:JSON ={}$additionalQueryParams:JSON ={}$searchArgs:SearchArgumentsForCLS $enablePortableFacets:Boolean = false $tenant:String! $enableFacetCount:Boolean = true $enableFlattenedFitment:Boolean = false ){search( query:$query page:$page prg:$prg facet:$facet sort:$sort cat_id:$catId max_price:$max_price min_price:$min_price ps:$ps ptss:$ptss trsp:$trsp recall_set:$recall_set additionalQueryParams:$additionalQueryParams dealsId:$dealsId ){query searchResult{...SortAndFilterResultFragment}}contentLayout( channel:"WWW" pageType:$pageType tenant:$tenant searchArgs:$searchArgs ){modules(tempo:{pageId:$dealsId}){__typename name version type moduleId matchedTrigger{zone}configs{__typename...on _TempoWM_GLASSWWWSearchSortFilterModuleConfigs{facetsV1 @skip(if:$enablePortableFacets){...FacetFragment}topNavFacets @include(if:$enablePortableFacets){...FacetFragment}allSortAndFilterFacets @include(if:$enablePortableFacets){...FacetFragment}}...on TempoWM_GLASSWWWSearchFitmentModuleConfigs{fitments( fitmentSearchParams:$fitmentSearchParams fitmentFieldParams:null ){...FitmentFragment sisFitmentResponse{...SortAndFilterResultFragment}}}...on TempoWM_GLASSWWWDealsListingConfigConfigs @include(if:$isDealsPage){_rawConfigs tileSize deals(searchParams:$searchParams){...SortAndFilterResultFragment}}}}pageMetadata{location{postalCode stateOrProvinceCode city storeId}pageContext}}}fragment SortAndFilterResultFragment on SearchInterface{aggregatedCount requestContext{isFitmentFilterQueryApplied categories{id name}}debug{sisUrl}paginationV2{pageProperties}itemStacks{meta{query stackId stackType title layoutEnum totalItemCount viewAllParams{query cat_id sort facet}}}modules{facetsV1 @skip(if:$enablePortableFacets){...FacetFragment}topNavFacets @include(if:$enablePortableFacets){...FacetFragment}allSortAndFilterFacets @include(if:$enablePortableFacets){...FacetFragment}}}fragment FacetFragment on Facet{title name expandOnLoad type layout min max selectedMin selectedMax unboundedMax stepSize isSelected values{id title name expandOnLoad description type itemCount @include(if:$enableFacetCount) isSelected baseSeoURL values{id title name expandOnLoad description type itemCount @include(if:$enableFacetCount) isSelected baseSeoURL values{id title name expandOnLoad description type itemCount @include(if:$enableFacetCount) isSelected baseSeoURL values{id title name expandOnLoad description type itemCount @include(if:$enableFacetCount) isSelected baseSeoURL values{id title name expandOnLoad description type itemCount @include(if:$enableFacetCount) isSelected baseSeoURL values{id title name expandOnLoad description type itemCount @include(if:$enableFacetCount) isSelected baseSeoURL values{id title name expandOnLoad description type itemCount @include(if:$enableFacetCount) isSelected baseSeoURL values{id title name expandOnLoad description type itemCount @include(if:$enableFacetCount) isSelected baseSeoURL}}}}}}}}}fragment FitmentFragment on Fitments{partTypeIDs result{status formId position quantityTitle extendedAttributes{...FitmentFieldFragment}labels{...LabelFragment}resultSubTitle notes suggestions{...FitmentSuggestionFragment}}labels{...LabelFragment}savedVehicle{vehicleType{...VehicleFieldFragment}vehicleYear{...VehicleFieldFragment}vehicleMake{...VehicleFieldFragment}vehicleModel{...VehicleFieldFragment}additionalAttributes{...VehicleFieldFragment}}fitmentFields{...VehicleFieldFragment}fitmentForms{id fields{...FitmentFieldFragment}title labels{...LabelFragment}}}fragment LabelFragment on FitmentLabels{ctas{...FitmentLabelEntityFragment}messages{...FitmentLabelEntityFragment}links{...FitmentLabelEntityFragment}images{...FitmentLabelEntityFragment}}fragment FitmentLabelEntityFragment on FitmentLabelEntity{id label labelV1 @include(if:$enableFlattenedFitment)}fragment VehicleFieldFragment on FitmentVehicleField{id label value}fragment FitmentFieldFragment on FitmentField{id displayName value extended data{value label}dependsOn isRequired errorMessage}fragment FitmentSuggestionFragment on FitmentSuggestion{id position loadIndex speedRating searchQueryParam labels{...LabelFragment}cat_id fitmentSuggestionParams{id value}}',hash:"f16c276bee4f98414555f1a7ed26660fe8e4cc70078fbd71f15b6c858f6f77bc"};var M=a(752406);const{publicRuntimeConfig:O}=(0,g.B)(),A=(e,t,a)=>{var l,o,c,d,u;const{router:m}=(0,b.t)(),{isMobile:p}=(0,f.vP)(),g=(0,n.iC)(r.a8),A=null==(l=g.search.values)?void 0:l.clientFetchTimeoutMs,V=null==(o=g.search.values)?void 0:o.enableGrapqlQueryParams,W=null==(c=g.search.values)?void 0:c.enablePortableFacets,E=null==(d=g.search.values)?void 0:d.enableLeftHandNav,k=null==(u=g.search.values)?void 0:u.enableSortFilterRefetch,{queryVariables:D,queryVariables:{dealsId:N,query:U,page:w,catId:B,ps:j,ptss:G,trsp:Q,id:J,recall_set:z,facet:Z},isSearch:K,pagination:H}=(0,i.A)(),{selectedQuickFilter:Y,facetsState:X}=(0,y.J2)(),ee=(0,s.S0)(),te=(0,M.useMemo)((()=>(0,h.as)(ee,Object.keys(ee).filter((e=>e!==a)),Y,p)),[ee,a,Y,p]),ae=(0,M.useMemo)((()=>ee[a].selectedFilters),[a,ee]),{0:ne,1:le}=(0,M.useState)({values:ae}),ie=(0,$.mP)(),{0:se,1:re}=(0,M.useState)(e),{0:oe,1:ce}=(0,M.useState)(ie),de=(0,M.useRef)(!1),ue=(0,M.useRef)(!1),me=(0,L.j)(m.pathname),{sort:pe,facet:ge,_be_shelf_id:fe}=(null==H?void 0:H.pageProperties)||{};let Fe=[];if("DealsPage"===me||"B2BDealsPage"===me){const e=(0,h.LL)(D,me,W);Fe=(0,v.x)(Object.values(e)).filter((e=>null==e?void 0:e.name.includes("gf_")))}const{catId:Se,...be}=(0,h.eX)([...te,...ne.values,...Fe],pe,ge,fe);if(W){const e=be.facet&&be.facet.split("||")||[],t=[];e.forEach((e=>{e.includes("fulfillment_method_in_store")?t.push("fulfillment_method:In-store"):t.push(e)})),be.facet=t.join("||")}const ve=(0,F.Z)(),ye={id:J,page:w,catId:Se||B||"",ps:j,prg:p?"mWeb":"desktop",...be,searchArgs:{query:"",cat_id:B,prg:p?"mWeb":"desktop",facet:Z,topicId:J}};ye.fitmentSearchParams={...ye,cat_id:B};const he=((e,t,a,n)=>{let l="";return{queryKey:[P,t],queryFn:()=>e.getGqlFetch("cegateway",(0,C.N)("topicsortfilter",t,!0,Boolean(n),(e=>{l=e})),{timeoutMs:a})(I,t).then((e=>{var a,n;const i={gqlVariables:t,queryKey:P,isServerSide:!1};if(null!=(a=e.errors)&&a.length)throw(0,_.j)({...i,additionalTags:["gqlFailure"],errors:e.errors,correlationId:l}),new Error(e.errors[0].message);return(0,_.j)({...i,searchResult:null==e||null==(n=e.data.seoTopicData)?void 0:n.sisResponse,additionalTags:["gqlSuccess"],correlationId:l}),(e=>{var t,a,n,l,i;let{data:s}=e;const{contentLayout:r,seoTopicData:{sisResponse:o}}=s;return{facets:(null==(t=r.modules)||null==(a=t.find((e=>"TopicSortFilterModule"===(null==e?void 0:e.type))))?void 0:a.configs).facets,totalItemCount:o.aggregatedCount||0,catInfo:{catId:(null==(n=o.paginationV2)||null==(l=n.pageProperties)?void 0:l.cat_id)||"",name:(null==(i=o.requestContext)?void 0:i.shelfDisplayName)||""}}})({data:(null==e?void 0:e.data)||{}})}))}})(ve,ye,A,V),$e={query:U,page:w,ps:j,ptss:G,trsp:Q,catId:Se||!K&&B||"",prg:p?"mWeb":"desktop",pageType:me,recall_set:z,dealsId:N,isDealsPage:"DealsPage"===me||"B2BDealsPage"===me,enablePortableFacets:W,tenant:(null==O?void 0:O.tenant)||"WM_GLASS",...be};$e.fitmentSearchParams={...$e,cat_id:B},$e.searchParams={...$e.fitmentSearchParams};const Le=((e,t,a,n,l)=>{let i="";return{queryKey:[q,t],queryFn:()=>e.getGqlFetch("cegateway",(0,C.N)("sortfilter",t,!0,Boolean(n),(e=>{i=e})),{timeoutMs:a})(R,t).then((e=>{var a,n;const s={gqlVariables:t,queryKey:q,isServerSide:!1};if(null!=(a=e.errors)&&a.length)throw(0,_.j)({...s,additionalTags:["gqlFailure"],errors:e.errors,correlationId:i}),new T.k(e.errors[0].message,{olCorrelationId:i});const r=(null==e?void 0:e.data)||{};return(0,_.j)({...s,searchResult:null==(n=r.search)?void 0:n.searchResult,additionalTags:["gqlSuccess"],correlationId:i}),(0,x.oJ)({data:r,debugMetrics:s,enablePortableFacets:l})}))}})(ve,$e,A,V,W),_e="TopicPage"===me||"B2BTopicPage"===me?{...he,config:{enabled:!1}}:{...Le,config:{enabled:!1}},{data:Ce,isLoading:Pe,refetch:Ie,error:xe}=(0,S.aM)(_e);return(0,M.useEffect)((()=>{t||E?(le({values:ae}),re(e),ce(ie)):ue.current=!1}),[t,X]),(0,M.useEffect)((()=>{const e="DealsPage"===me||p||!E||k;t&&(ue.current?"price"===Y||"fulfillment_method"===Y||"fulfillment_speed"===Y||"brand"===Y?("fulfillment_speed"===Y&&(()=>{const e=JSON.parse(JSON.stringify(se)),t=null==e?void 0:e.filter((e=>"fulfillment_speed"===(null==e?void 0:e.type)));var a;if(t&&t[0])if(0===ne.values.length)null==(a=t[0].values)||a.forEach((e=>{e.isSelected=null}));else for(const l of ne.values){var n;null==(n=t[0].values)||n.forEach((e=>{e.name===(null==l?void 0:l.value)&&(e.isSelected=!0)}))}re(e)})(),"price"===Y&&(()=>{const e=JSON.parse(JSON.stringify(se)),t=null==e?void 0:e.filter((e=>"price"===(null==e?void 0:e.type)));if(0===ne.values.length)t&&t[0]&&(t[0].selectedMax=null,t[0].selectedMin=null);else for(const a of ne.values)"max_price"===(null==a?void 0:a.name)&&t&&t[0]&&(t[0].selectedMax=a.value?+a.value:0),"min_price"===(null==a?void 0:a.name)&&t&&t[0]&&(t[0].selectedMin=a.value?+a.value:0);re(e)})()):e&&Ie():de.current&&(ue.current=!0)),de.current=!0}),[ne,Ie]),(0,M.useEffect)((()=>{Ce&&Ce.facets&&!xe&&(re(Ce.facets),ce(Ce.catInfo.name&&"0"!==Ce.catInfo.catId?Ce.catInfo:{}))}),[Ce,xe]),{facetData:se,selectedDeptObject:oe,isLoading:Pe,selectedFilters:ne,setSelectedFilters:le,setSelectedDepartment:ce}},V=(e,t,a,g)=>{var f;const{pageContext:F}=(0,i.A)(),{updateFacetState:S,facetsState:b}=(0,s.qg)(a),{updateNonQuickFiltersState:v}=(0,s.hP)(),{updateAllFiltersState:y}=(0,s.Ow)(),h=(0,l.wG)(),$=u.Ee[a],L=(0,o._)($),{removeLHNDuplicates:_,enableTopNavUpdateGQLCall:C}=(null==(f=(0,n.iC)(r.a8).search)?void 0:f.values)||{},{facetData:P,selectedDeptObject:I,isLoading:x,selectedFilters:T,setSelectedFilters:q}=A(e,t,a),R=(0,m.O)(P,a,I,_),M=(0,c.Z)(T),O=(0,d.Z)(T),{values:V}=T;return{onViewResultsFn:()=>{"all_filters"===a?y(V):"sort_and_filter"===a?v(V):S({isSelected:!!V.length,updatedSelectedFilters:V}),g(),C&&h({context:F,action:"onClick",name:"viewResults",payload:{...L}})},onClear:(e,t)=>{const a=(0,p.Lw)(T,e,t);q({...a}),C&&(t&&(b[t].isSelected=!1),S({isSelected:!1,updatedSelectedFilters:V}))},onClearAppliedFilters:(e,t)=>q({...T,values:(0,p.EC)(T.values,e,t)}),onSelect:e=>{const t=(0,p._C)(T,e);q({...t})},checkIsSelected:(e,t)=>{if(e)return M();const a="fulfillment_method_in_store"===t,n="fulfillment_method"===t;if(a||n){if(T.values.some((e=>"fulfillment_method"===(null==e?void 0:e.type)&&"In-store"===e.value))){if(a)return!0;if(n)return!1}}return T.values.some((e=>(null==e?void 0:e.name)===t))},facetDataByType:R,isLoading:x,selectedFilters:T,getSelectedValues:O}}}}]);