"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[59855],{778375:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},810306:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PageMsgActionEnum=t.ExtActionEnum=void 0,t.ExtActionEnum={CLICK:"click",INIT:"init",PAGE_MSG:"page_msg",READ_COOKIE:"read_cookie",RESIZE:"resize",WRITE_COOKIE:"write_cookie"},t.PageMsgActionEnum={ADD_IDENTIFIER:"add_identifier",GET_QUERY_STRING:"get_query_string",HIDE_ELEMENT:"hide_element",OPEN_NEW_TAB:"open_new_tab",SCROLL_TO_VIEW:"scroll_to_view",SHOW_ELEMENT:"show_element"}},662567:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.HostActionEnum=void 0,t.HostActionEnum={READ_COOKIE:"read_cookie",UPDATE_CREATIVE_POSITION:"update_creative_position",UPDATE_POSITION:"update_position",UPDATE_SCREEN_SIZE:"update_screen_size",WRITE_COOKIE:"write_cookie"}},608220:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},450704:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(778375),t),r(n(810306),t),r(n(662567),t),r(n(608220),t)},931165:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(450704),o=n(85502),u=i(n(469831)),a=i(n(5152));t.default=function(e){var t=function(t){if(e.indexOf(t)<0)throw new Error("Access to cookie is disallowed")};return function(e,n){var i=e.type,c=e.payload;if(i===r.ExtActionEnum.READ_COOKIE){var f=c.cookie.name,d=void 0,s=!1;try{t(f),d=u.default(f)||""}catch(h){d="",s=!0}var l={payload:{cookie:{data:{info:d},name:f,status:s?"failed":"read-cookie"}},type:r.HostActionEnum.READ_COOKIE},v=o.sendHostMsg(l,!0);n.dispatch(v)}if(i===r.ExtActionEnum.WRITE_COOKIE){var _=c.cookie,p=_.name;v=_.data,s=!1;try{(null===v||void 0===v?void 0:v.info)&&(t(p),a.default(p,v.info))}catch(h){s=!0}var E={payload:{cookie:{data:v,name:p,status:s?"failed":"write-cookie"}},type:r.HostActionEnum.WRITE_COOKIE};n.dispatch(o.sendHostMsg(E,!0))}}}},660010:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(752406),o=n(85502),u=i(n(134400));t.default=function(e){var t=r.useRef();r.useEffect((function(){return e.subscribe((function(n,i,r){var a,c;if(u.default()){if(!t.current){var f=document.getElementById(e.getState().id);f&&(t.current=f)}var d=null===(a=r.meta)||void 0===a?void 0:a.sendToExt;if(d){var s=null===(c=t.current)||void 0===c?void 0:c.contentWindow;if(s){var l="string"!==typeof d?JSON.stringify(d):d;s.postMessage(l,"*"),e.dispatch(o.sendHostMsg(d))}}}}))}),[e])}},949148:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(450704),c=n(752406),f=u(n(931165)),d=o(n(85502)),s=u(n(714520)),l=u(n(198242)),v=u(n(59639)),_=u(n(824633)),p=u(n(134400)),E=u(n(382301)),h=u(n(660010)),y=u(n(737374)),O=u(n(243614)),g=function(e){var t=e.id,n=e.html,i={config:{sfLoadEvent:"instant"},html:n,id:t};return{height:e.height,html:n,id:t,init:!1,name:encodeURIComponent(JSON.stringify(i)),pos:{intersectionRatio:0,x:0,y:0},received:[],sent:[]}};t.default=function(e,t){var n=y.default(g(e),d.default(g(e)),[f.default(t.allowedCookies)]);return h.default(n),O.default(n),c.useEffect((function(){var t=E.default((function(t){t&&e.id===t.id&&(n.dispatch(t),n.dispatch(d.recExtMsg(t)))})),i=l.default((function(){if(s.default(n.getState())){var e={height:v.default(),width:_.default()};n.dispatch(d.updateViewport(e,{sendToExt:{payload:e,type:a.HostActionEnum.UPDATE_SCREEN_SIZE}}))}}),250);return i(),p.default()&&(window.addEventListener("scroll",i),window.addEventListener("resize",i)),function(){p.default()&&(window.removeEventListener("scroll",i),window.removeEventListener("resize",i)),t()}}),[]),n}},737374:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(752406),o=i(n(158226));t.default=function(e,t,n){void 0===n&&(n=[]);var i=r.useRef(o.default(t,e,n)),u=r.useRef(i.current.getState());return r.useEffect((function(){return i.current.subscribe((function(e){u.current=e}))}),[]),i.current}},171727:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(752406);t.default=function(e,t){var n=i.useState(t(e.getState())),r=n[0],o=n[1];return i.useEffect((function(){return e.subscribe((function(e,n){var i=t(e);t(n)!==i&&o(i)}))}),[]),r}},339293:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(752406);t.default=function(e,t){i.useEffect((function(){return e.subscribe(t)}),[])}},243614:function(e,t,n){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(450704),u=n(752406),a=n(85502),c=r(n(127603)),f=r(n(506234)),d=r(n(198242)),s=r(n(134400)),l=r(n(339293)),v=function(e){if(e&&e.getBoundingClientRect){var t=e.getBoundingClientRect();return{x:t.x,y:t.y}}return null};t.default=function(e){var t=u.useRef(function(e){return d.default((function(){var t=e.getState(),n=f.default(t),r=c.default(t);if(r&&n){var u={payload:i(i({},r),{screenHeight:n.height,screenWidth:n.width}),type:o.HostActionEnum.UPDATE_CREATIVE_POSITION};e.dispatch(a.sendHostMsg(u,!0))}}),250)}(e));u.useEffect((function(){var t,n=document.getElementById(e.getState().id);if(s.default()&&n&&window.IntersectionObserver){var r=new window.IntersectionObserver((function(t){var r=t[0].intersectionRatio,o=v(n);o&&e.dispatch(a.updatePos(i({intersectionRatio:r},o)))}),{threshold:[0,.3,.5,.8,1]});r.observe(n);var o=d.default((function(){var t=v(n),r=c.default(e.getState());t&&r&&e.dispatch(a.updatePos(i({intersectionRatio:r.intersectionRatio},t)))}),100);window.addEventListener("scroll",o),window.removeEventListener("resize",o);var u=setInterval((function(){var t=v(n);if(t){var i=t.x,r=t.y,u=c.default(e.getState());u&&u.x===i&&u.y===r||o()}}),1e3);t=function(){clearInterval(u),window.removeEventListener("scroll",o),window.removeEventListener("resize",o),r.unobserve(n)}}return function(){t&&t()}}),[]),l.default(e,(function(e,n){if(s.default()){var i=f.default(n),r=f.default(e),o=c.default(n),u=c.default(e);!r||!u||i&&o&&i.height===r.height&&i.width===r.width&&o.x===u.x&&o.y===u.y||t.current()}}))}},835404:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(949148)),o=i(n(171727)),u={allowedCookies:[]};t.default=function(e,t){var n=e.initialHeight,i=void 0===n?0:n,a=e.html,c=e.id;void 0===t&&(t=u);var f=r.default({height:i,html:a,id:c},t);return{height:o.default(f,(function(e){return e.height})),name:o.default(f,(function(e){return e.name})),store:f}}},85502:function(e,t,n){var i,r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r.apply(this,arguments)},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],u=0,a=o.length;u<a;u++,r++)i[r]=o[u];return i};Object.defineProperty(t,"__esModule",{value:!0}),t.sendHostMsg=t.recExtMsg=t.updateViewport=t.updatePos=void 0;var u=n(450704),a=n(158226),c="[internal]",f=c+" UPDATE_POS";t.updatePos=function(e){return{payload:e,type:f}};var d=c+" UPDATE_VIEWPORT";t.updateViewport=function(e,t){return{meta:t,payload:e,type:d}};var s=c+" REC_EXT_MSG";t.recExtMsg=function(e){return{payload:e,type:s}};var l=c+" HOST_SEND_MSG";t.sendHostMsg=function(e,t){var n;return t&&(n={sendToExt:e}),{meta:n,payload:e,type:l}};var v=((i={})[l]=function(e,t){var n=t.payload;return r(r({},e),{sent:o([n],e.sent).slice(0,20)})},i[s]=function(e,t){var n=t.payload;return r(r({},e),{received:o([n],e.received).slice(0,20)})},i[f]=function(e,t){var n=t.payload;return r(r({},e),{pos:n})},i[u.ExtActionEnum.INIT]=function(e){return r(r({},e),{html:"",init:!0,name:""})},i[u.ExtActionEnum.RESIZE]=function(e,t){var n=t.payload;return r(r({},e),{height:n.height})},i[d]=function(e,t){var n=t.payload;return r(r({},e),{viewPort:n})},i);t.default=function(e){return a.createReducer(e,v)}},714520:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.init}},127603:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.pos}},506234:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.viewPort}},158226:function(e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createReducer=void 0;t.default=function(e,t,i){void 0===i&&(i=[]);var r=function(e,t){var n=t,i=n,r=[];return{dispatch:function(t){i=n,n=e(n,t),r.forEach((function(e){e(n,i,t)}))},getState:function(){return n},subscribe:function(e){return r.push(e),function(){var t=r.indexOf(e);r.splice(t,1)}}}}(e,t),o=function(){},u={dispatch:function(e){return o(e)},getState:r.getState};return o=function(e){i.forEach((function(t){t(e,u)})),r.dispatch(e)},n(n({},r),{dispatch:o})},t.createReducer=function(e,t){return function(n,i){if(void 0===n&&(n=e),"string"===typeof i.type){var r=t[i.type];if(r)return r(n,i)}return n}}},198242:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=null;return function(){null!==n&&clearTimeout(n);var i=arguments,r=this;n=setTimeout((function(){e.apply(r,i)}),t)}}},59639:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return window.innerHeight}},824633:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return window.innerWidth}},469831:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=null,n=escape(e)+"=",i=document.cookie,r=void 0===i?null:i;if(null===r)return t;for(var o=r.split(";"),u=0;u<o.length;u++){for(var a=o[u];" "===a.charAt(0);)a=a.substring(1,a.length);0===a.indexOf(n)&&(t=unescape(a.substring(n.length,a.length)))}return t}},134400:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return"undefined"!==typeof window}},382301:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(450704),o=i(n(134400)),u=i(n(197494)),a=[];o.default()&&window.addEventListener("message",(function(e){var t=u.default(e.data);if("boolean"!==typeof t){var n=t.id,i=void 0===n?"":n,o=t.type,c=void 0===o?"":o,f=t.payload;if(i&&c)switch(c){case r.ExtActionEnum.CLICK:case r.ExtActionEnum.INIT:case r.ExtActionEnum.READ_COOKIE:case r.ExtActionEnum.WRITE_COOKIE:case r.ExtActionEnum.RESIZE:a.forEach((function(e){try{e({id:i,payload:f,type:c})}catch(t){0}}))}}})),t.default=function(e){return o.default()&&a.push(e),function(){a=a.filter((function(t){return t!==e}))}}},197494:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){try{return JSON.parse(e)}catch(t){return!1}}},5152:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e+"="+t;document.cookie=n}}}]);